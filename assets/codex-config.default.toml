# Default Codex CLI + MCP config.
#
# bootstrap-agentic-coding.sh copies this to `~/.codex/config.toml` if that file
# doesn't exist yet. The placeholder `__FS_ALLOWED_DIR__` is replaced with a real
# path that exists on disk.

# --- Defaults (used when no profile is selected) ---
model = "gpt-5.2"

# You can set this per-profile if you only want "high" reasoning sometimes.
# model_reasoning_effort = "high"

sandbox_mode = "workspace-write"
approval_policy = "on-request"

# --- Notifications ---
#
# The notifier prefers Slack Web API (threaded messages), then falls back to an
# incoming webhook, then falls back to a local desktop notification:
#   1) SLACK_BOT_TOKEN + SLACK_CHANNEL (chat.postMessage, threaded by session)
#   2) SLACK_WEBHOOK_URL (Incoming Webhook, unthreaded)
#   3) notify-send (desktop notification)
#
# The bootstrap script installs the notifier to __CODEX_DIR__/bin/codex_notify_slack.py.
notify = ["python3", "__CODEX_DIR__/bin/codex_notify_slack.py"]

[sandbox_workspace_write]
network_access = true

[features]
web_search_request = true
rmcp_client = true

# --- Profiles (use: `codex --profile <name>`) ---
#
# Note: Profiles override root-level settings. Consider also setting:
#   profile = "<name>"
# at the top level to make one profile the default.

[profiles.read]
model_reasoning_effort = "high"
sandbox_mode = "read-only"
approval_policy = "untrusted"

[profiles.write]
model_reasoning_effort = "high"
sandbox_mode = "workspace-write"
approval_policy = "on-failure"

[profiles.auto]
model_reasoning_effort = "high"
sandbox_mode = "workspace-write"
approval_policy = "on-request"

[profiles.yolo]
model_reasoning_effort = "high"
sandbox_mode = "danger-full-access"
approval_policy = "never"

# --- MCP servers ---
[mcp_servers.filesystem]
command = "npx"
args = ["-y", "@modelcontextprotocol/server-filesystem", "__FS_ALLOWED_DIR__"]

[mcp_servers.serena]
command = "uvx"
args = [
  "--from",
  "git+https://github.com/oraios/serena",
  "serena",
  "start-mcp-server",
  "--context",
  "codex",
]

[mcp_servers.context7]
command = "npx"
args = ["-y", "@upstash/context7-mcp@latest"]

[mcp_servers.github]
command = "docker"
args = ["run","-i","--rm","-e","GITHUB_PERSONAL_ACCESS_TOKEN","ghcr.io/github/github-mcp-server"]
env_vars = ["GITHUB_PERSONAL_ACCESS_TOKEN"]

[mcp_servers.atlassian]
url = "https://mcp.atlassian.com/v1/mcp"

[mcp_servers.playwright]
command = "npx"
args = ["-y", "@playwright/mcp@latest"]
